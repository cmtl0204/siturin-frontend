<p-fluid>
    <div class="card flex flex-col gap-4 w-full">
        <p-panel header="Actividades Turísticas Declaradas">
            <p-message severity="info">
                <div>
                    <h2 class="m-0 text-lg font-semibold text-blue-800">Importante</h2>
                    <p class="m-0 text-base text-blue-700">
                        Es obligatorio declarar al menos una de las siguientes Actividades Turísticas:
                    </p>
                </div>
            </p-message>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-3">
                <form [formGroup]="form" class="card flex justify-center">
                    <p-multiselect
                        [options]="activities"
                        formControlName="activities"
                        optionLabel="name"
                        appendTo="body"
                        placeholder="Seleccione las Actividades Disponibles">
                    </p-multiselect>
                </form>
            </div>
        </p-panel>

        @if (activitiesField.value) {
            <p-panel header="Formulario por Actividad">
                <p-tabs [(value)]="tabSelected">
                    <p-tablist>
                        @for (tab of activitiesField.value; track tab; let i = $index) {
                            <p-tab [value]="i">
                                {{ tab.name }}
                            </p-tab>
                        }
                    </p-tablist>

                    @for (tab of activitiesField.value; track tab; let i = $index) {
                        <p-tabpanel [value]="i">
                            @switch (tab.code) {
                                @case ('alimentos_bebidas') {
                                    <app-foodDrink (dataOut)="saveFoodDrinkForm($event)"/>
                                }
                                @case ('alojamiento') {
                                    <app-accommodation (dataOut)="saveAccommodationForm($event)"></app-accommodation>
                                }
                                @case ('operacion') {
                                    <app-community-operation
                                        (dataOut)="saveCommunityOperationForm($event)"></app-community-operation>
                                }
                                @case ('transporte') {
                                    <app-touristTransportCompany
                                        (dataOut)="saveTouristTransportCompanyForm($event)"></app-touristTransportCompany>
                                }
                            }
                        </p-tabpanel>
                    }
                </p-tabs>
            </p-panel>
        }
    </div>
</p-fluid>
