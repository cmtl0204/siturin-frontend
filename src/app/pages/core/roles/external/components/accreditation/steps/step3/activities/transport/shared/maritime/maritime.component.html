<p-fluid>
    <form
        [formGroup]="form"
        class="card flex flex-col gap-6 w-full">

        <div class="grid grid-cols-1 md:grid-cols-12 gap-6">
            <div class="md:col-span-12 flex flex-col gap-2">
                <h2>Registro Marítimo</h2>

                <p-message severity="info">
                    <div>
                        <b>Importante:</b>
                        <p class="mt-4">Registrar datos de la matrícula y transporte marítimo</p>
                    </div>
                </p-message>
            </div>

            <!-- hasmaritimotransport -->
            <div class="md:col-span-12 flex flex-col gap-2">
                <label
                    appLabel
                    for="hasMaritimeTransport"
                    [required]="hasMaritimeTransportField"
                    label="Declaro que el establecimiento, al momento del envío de la solicitud, ha contratado Guías de Turismo">
                </label>

                <p-toggleswitch id="hasMaritimeTransport" formControlName="hasMaritimeTransport" >
                    <ng-template #handle let-checked="checked">
                        <span class="!text-xs font-semibold">{{ checked ? 'SÍ' : 'NO' }}</span>
                    </ng-template>
                </p-toggleswitch>

                <p-message
                    appErrorMessage
                    [errors]="hasMaritimeTransportField.errors"
                    [touched]="hasMaritimeTransportField.touched"
                    [dirty]="hasMaritimeTransportField.dirty" />
            </div>
        </div>
    </form>
</p-fluid>
<p-fluid>
    @if (hasMaritimeTransportField.value) {
        <app-list-basic
            title="Listado de Transportes marítimos"
            [items]="items"
            [cols]="cols"
            [buttonActions]="buttonActions"
            (onCreate)="create()"
            (onSelect)="buildButtonActions($event)"
        />
    }
</p-fluid>
<p-dialog [(visible)]="isVisibleModal"
          [modal]="true"
          [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }"
          [style]="{ width: '25vw' }"
          [draggable]="false"
          (onHide)="closeModal()"
          [resizable]="false">
    <ng-template #header>
        <div class="inline-flex items-center justify-center gap-2">
            <span class="font-bold whitespace-nowrap">
                Agregar transporte marítimo
            </span>
        </div>
    </ng-template>
<p-fluid>
    <form [formGroup]="maritimeForm" (ngSubmit)="onSubmit()"
          class="card flex flex-col gap-2 w-full">
        <div class="grid grid-cols-1 md:grid-cols-12 gap-6">

            <!-- totalUnits -->
            <div class="md:col-span-6 flex flex-col gap-2">
                <label
                    appLabel
                    for="totalUnits"
                    [required]="totalUnitsField"
                    label="Número de unidades de transporte">
                </label>

                <input p-inputNumber id="totalUnits" formControlName="totalUnits" type="number" min="0">

                <p-message
                    appErrorMessage
                    [errors]="totalUnitsField.errors"
                    [touched]="totalUnitsField.touched"
                    [dirty]="totalUnitsField.dirty" />
            </div>

            <!-- totalSeats -->
            <div class="md:col-span-6 flex flex-col gap-2">
                <label
                    appLabel
                    for="totalSeats"
                    [required]="totalSeatsField"
                    label="Total, número de puesto (asientos)">
                </label>

                <input p-inputNumber id="totalSeats" formControlName="totalSeats" type="number" min="0">

                <p-message
                    appErrorMessage
                    [errors]="totalSeatsField.errors"
                    [touched]="totalSeatsField.touched"
                    [dirty]="totalSeatsField.dirty" />
            </div>

            <!-- certifiedCode -->
            <div class="md:col-span-12 flex flex-col gap-2">
                <label
                    appLabel
                    for="certifiedCode"
                    [required]="certifiedCodeField"
                    label="Número o Código de la Matrícula de Armador:">
                </label>.


                <input pInputText id="certifiedCode" formControlName="certifiedCode">

                <p-message
                    appErrorMessage
                    [errors]="certifiedCodeField.errors"
                    [touched]="certifiedCodeField.touched"
                    [dirty]="certifiedCodeField.dirty" />
            </div>

            <!-- certifiedIssueAt -->
            <div class="md:col-span-6 flex flex-col gap-2">
                <label
                    appLabel
                    for="certifiedIssueAt"
                    [required]="certifiedIssueAtField"
                    label="Fecha de emisión de la Matrícula de Armador">
                </label>

                <p-datepicker 
                    id="certifiedIssueAt"
                    formControlName="certifiedIssueAt"
                    [showIcon]="true"
                    dateFormat="yy-mm-dd">
                </p-datepicker>

                <p-message
                    appErrorMessage
                    [errors]="certifiedIssueAtField.errors"
                    [touched]="certifiedIssueAtField.touched"
                    [dirty]="certifiedIssueAtField.dirty" />
            </div>

            <!-- certifiedExpirationAt -->
            <div class="md:col-span-6 flex flex-col gap-2">
                <label
                    appLabel
                    for="certifiedExpirationAt"
                    [required]="certifiedExpirationAtField"
                    label="Fecha de Caducidad de la Matrícula de Armador">
                </label>

                <p-datepicker
                    id="certifiedExpirationAt"
                    formControlName="certifiedExpirationAt"
                    [showIcon]="true"
                    dateFormat="yy-mm-dd">
              </p-datepicker>

                <p-message
                    appErrorMessage
                    [errors]="certifiedExpirationAtField.errors"
                    [touched]="certifiedExpirationAtField.touched"
                    [dirty]="certifiedExpirationAtField.dirty" />
            </div>

            <!-- actions -->
            <div class="md:col-span-12 flex flex-col gap-2">
                <p-button type="submit" label="Agregar" [icon]="PrimeIcons.SAVE" />
            </div>
        </div>
    </form>
</p-fluid>
</p-dialog>
